%% LaTeX2e file `./temp/L20-26'
%% generated by the `filecontents' environment
%% from source `netCalBookv4' on 2019/02/19.
%%
\begin{problem}
\nfs{non initial bucket level, hard\\}
 We consider a flow defined by
its function $R(t)$, with
                $R(t)=$ the number of bits observed since time $t=0$.
 \begin{enumerate}
  \item The
   flow is fed into a buffer, served at a rate $r$.  Call $q(t)$
   the buffer content at time $t$.  We do the same assumptions as
   in the lecture, namely, the buffer is large enough, and is
   initially empty. What is the expression of $q(t)$ assuming we
   know $R(t)$~?

   We assume now that, unlike what we saw in the lecture, the initial
   buffer content (at time $t=0$) is \emph{not} $0$, but some value $q_{0}
   \geq 0$. What is now the expression for $q(t)$~?
\sol{\\
The expression of $q(t)$ when the  buffer is initially empty is:
$$
q(t) = \sup_{s: s \leq t} \left \{ R(t) - R(s) - r(t-s) \right \}
$$
If the initial buffer content is some value $q_0$ then we have:
$$
q(t) = \max { ( \sup_{s: s \leq t} \left \{ R(t) - R(s) - r(t-s) \right \}, R(t)- rt+q_0  ) }
$$
}
 \item The flow is put into a leaky bucket policer, with rate
 $r$ and bucket size $b$.  This is a policer, not a shaper, so
 nonconformant bits are discarded.  We assume that the bucket
 is large enough, and is initially empty.  What is the
 condition on $R$ which ensures that no bit is discarded by the
 policer (in other words, that the flow is conformant)~?

 We assume now that, unlike what we saw in the lecture, the
 initial \emph{bucket} content (at time $t=0$) is \emph{not}
 $0$, but some value $b_{0} \geq 0$.  What is now the condition
 on $R$ which ensures that no bit is discarded by the policer
 (in other words, that the flow is conformant)~?
\sol{\\
The condition on $R$ which ensures that the flow is conformant when the bucket is initially empty is :
$$
\sup_{s: s \leq t} \left \{ R(t) - R(s) - r(t-s) \right \} \leq b
$$
If the initial bucket content is some value $b_0$ then the condition becomes:
$$
\max { ( \sup_{s: s \leq t} \left \{ R(t) - R(s) - r(t-s) \right \}, R(t)- rt+b_0  ) } \leq b
$$
}
\end{enumerate}
\end{problem}%
